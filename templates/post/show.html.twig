{% extends 'base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}

<br><br>

<div class="container">

    <h1>{{ post.title }}</h1>

    <p>
        {{ post.content|raw }}
    </p>

    <p>
        Article rédigé le {{ post.date ? post.date|date('d/m/y') : '' }}
    </p>

    <hr>
    <!-- Facebook -->
    <a href="http://www.facebook.com/sharer.php?u=https://monpoison.fr/public/article/voir/{{ post.id }}" target="_blank">Share to FaceBook</a>
    
    <!-- Twitter -->
    <a href="http://twitter.com/share?url=https://monpoison.fr/public/article/voir/{{ post.id }}&text=Simple Share Buttons&hashtags=simplesharebuttons"
        target="_blank">Twitter</a>

    <br>
    {% if app.user %}
    <a href="{{ path('comment_new', {'id':post.id}) }}" class="custom-btn">Commenter</a>
    {% endif %}
    <br>
    <br>

    <a href="{{ path('post_index') }}">Retour à la liste des articles</a>

    <br>

    {% if is_granted('ROLE_ADMIN') %}

    <a href="{{ path('post_edit', {'id': post.id}) }}" class="custom-btn">edit</a>
    {{ include('post/_delete_form.html.twig') }}
    <hr>
    {% endif %}

    {% if not app.user %}
    <p>
        <a href="{{ path('login') }}" class="custom-btn" title="connexion">Connectez-vous</a> pour pouvoir ajouter un
        commentaire.
    </p>
    {% endif %}

    <hr>
    <h2>Commentaires</h2>

    {% for comment in comments %}
    <p>
        <i>{{ comment.user.pseudo }} - {{ comment.date|date('d/m/y') }}</i>
        <br>
        <br>
        {{ comment }}
    </p>
    <br>
    {% if app.user and app.user.id == comment.user.id %}
    <a href="{{ path('comment_edit', {'id':comment.id}) }}" title="modifier commentaire" class="custom-btn">Modifier</a>
    <a href="{{ path('comment_delete', {'id':comment.id}) }}" title="supprimer commentaire" class="custom-btn"
        onclick="return confirm('Voulez-vous supprimer votre commentaire ?')">Supprimer</a>
    {% endif %}

    <hr>
    {% endfor %}

</div>
{% endblock %}